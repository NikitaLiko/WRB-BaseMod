# –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–º–ø–∞—Å Military PDA

## üß≠ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–ø–∞—Å–∞

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **Military PDA (–ø—Ä–µ–¥–º–µ—Ç)** - —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–≥—Ä–µ
2. **WrbPlayerData (capability)** - –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞, —Ö—Ä–∞–Ω–∏–º—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. **HudOverlay (–∫–ª–∏–µ–Ω—Ç)** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞—Å–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–∞—Å–∞

–ö–æ–≥–¥–∞ –∏–≥—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ö–ü–ö (–ü–ö–ú):

```java
// –í MilitaryPdaItem.java
public InteractionResultHolder<ItemStack> use(Level level, Player player, InteractionHand hand) {
    if (!level.isClientSide) {
        player.getCapability(WrbPlayerDataProvider.WRB_PLAYER_DATA_CAPABILITY).ifPresent(data -> {
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ capability –∏–≥—Ä–æ–∫–∞
            boolean newState = !data.isCompassActive();
            data.setCompassActive(newState);
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å –∫–ª–∏–µ–Ω—Ç–æ–º
            WrbNetworking.sendToClient(new SyncWrbDataPacket(data), serverPlayer);
        });
    }
}
```

**–í–∞–∂–Ω–æ:** –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–∞—Å–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `WrbPlayerData` (capability –∏–≥—Ä–æ–∫–∞), –∞ –ù–ï –≤ NBT —Ç–µ–≥–∞—Ö –ö–ü–ö!

### 2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞—Å–∞

–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ `HudOverlay` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–≤–∞ —É—Å–ª–æ–≤–∏—è:

```java
// –í HudOverlay.java
boolean compassActive = pl.getCapability(WrbPlayerDataProvider.WRB_PLAYER_DATA_CAPABILITY)
        .map(WrbPlayerData::isCompassActive)
        .orElse(false);

boolean hasPda = pl.getInventory().contains(ModItems.MILITARY_PDA.get().getDefaultInstance())
        || pl.getOffhandItem().is(ModItems.MILITARY_PDA.get());

if (!compassActive || !hasPda) return;
```

**–£—Å–ª–æ–≤–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–º–ø–∞—Å–∞:**
1. ‚úÖ –ö–æ–º–ø–∞—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (—á–µ—Ä–µ–∑ capability)
2. ‚úÖ –£ –∏–≥—Ä–æ–∫–∞ –µ—Å—Ç—å –ö–ü–ö –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏–ª–∏ –≤ —Ä—É–∫–µ

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç:

```java
WrbNetworking.sendToClient(new SyncWrbDataPacket(data), serverPlayer);
```

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç capability –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –∏ `HudOverlay` –≤–∏–¥–∏—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

## üì¶ –†–æ–ª—å NBT —Ç–µ–≥–æ–≤

NBT —Ç–µ–≥–∏ –ö–ü–ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**:

| NBT –¢–µ–≥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------------|
| `Enabled` | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ tooltip |
| `Owner` | –ü–æ–∫–∞–∑–∞—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ tooltip |
| `OwnerUUID` | –û—Ç–ª–∞–¥–∫–∞ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `UsageCount` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
| `CreatedTime` | –í–æ–∑—Ä–∞—Å—Ç –ö–ü–ö –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ |

**NBT —Ç–µ–≥–∏ –ù–ï –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –∫–æ–º–ø–∞—Å–∞!**

## ‚öôÔ∏è –ü–æ—á–µ–º—É —Ç–∞–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞?

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:

1. **–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –∏–≥—Ä–æ–∫—É, –∞ –Ω–µ –∫ –ø—Ä–µ–¥–º–µ—Ç—É**
   - –ö–æ–º–ø–∞—Å –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º, –¥–∞–∂–µ –µ—Å–ª–∏ –ö–ü–ö –≤ –¥—Ä—É–≥–æ–π —Ä—É–∫–µ
   - –ö–æ–º–ø–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ –ö–ü–ö –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
   - –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ –ö–ü–ö

2. **–û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã**
   - `WrbPlayerData.isCompassActive()` - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   - –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –ö–ü–ö
   - –ü—Ä–æ—â–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä

3. **NBT —Ç–µ–≥–∏ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**
   - –•—Ä–∞–Ω—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –ö–ü–ö
   - –ü–æ–ª–µ–∑–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –ù–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "–∫–æ–º–ø–∞—Å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è"

### –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –ù–ï –≤ NBT —Ç–µ–≥–∞—Ö

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª "–∫–æ–º–ø–∞—Å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è", –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –Ω–µ —Å–≤—è–∑–∞–Ω–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º NBT —Ç–µ–≥–æ–≤. 

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. ‚ùå –ö–ü–ö –Ω–µ –±—ã–ª –≤–∫–ª—é—á–µ–Ω (–Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –ü–ö–ú)
2. ‚ùå –ö–ü–ö –Ω–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
3. ‚ùå –î–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä
4. ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å capability

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É:

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ö–ü–ö –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ:**
   ```java
   boolean hasPda = player.getInventory().contains(ModItems.MILITARY_PDA.get().getDefaultInstance());
   ```

2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–º–ø–∞—Å –≤–∫–ª—é—á–µ–Ω:**
   ```java
   boolean active = player.getCapability(WrbPlayerDataProvider.WRB_PLAYER_DATA_CAPABILITY)
           .map(WrbPlayerData::isCompassActive)
           .orElse(false);
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:**
   - –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–ü–ö –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ `SyncWrbDataPacket`
   - Capability –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ –∫–æ–º–ø–∞—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ capability –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```java
   player.getCapability(WrbPlayerDataProvider.WRB_PLAYER_DATA_CAPABILITY).ifPresent(data -> {
       System.out.println("Compass active: " + data.isCompassActive());
   });
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ capability –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:**
   ```java
   Minecraft.getInstance().player.getCapability(WrbPlayerDataProvider.WRB_PLAYER_DATA_CAPABILITY).ifPresent(data -> {
       System.out.println("Client compass active: " + data.isCompassActive());
   });
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ö–ü–ö:**
   ```java
   System.out.println("Has PDA: " + player.getInventory().contains(ModItems.MILITARY_PDA.get().getDefaultInstance()));
   ```

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚ùå –£–¥–∞–ª–µ–Ω NBT —Ç–µ–≥ `LastUsed` (–Ω–µ –Ω—É–∂–µ–Ω)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–∞—Å–∞ —á–µ—Ä–µ–∑ capability
- ‚úÖ NBT —Ç–µ–≥–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ö–æ–º–ø–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. ‚úÖ `MilitaryPdaItem.use()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç `data.setCompassActive()`
2. ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ `SyncWrbDataPacket`
3. ‚úÖ `HudOverlay` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é capability
4. ‚úÖ NBT —Ç–µ–≥–∏ –Ω–µ –º–µ—à–∞—é—Ç —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã

## üìù –†–µ–∑—é–º–µ

- **–ö–æ–º–ø–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ WrbPlayerData capability**
- **NBT —Ç–µ–≥–∏ –ö–ü–ö - —Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–∞—Å–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –∏–≥—Ä–æ–∫—É, –∞ –Ω–µ –∫ –ø—Ä–µ–¥–º–µ—Ç—É**
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç—ã**

–ï—Å–ª–∏ –∫–æ–º–ø–∞—Å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –ø—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ NBT —Ç–µ–≥–∞—Ö, –∞ –≤:
- Capability –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- –ü–∞–∫–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
- –ö–ü–ö –Ω–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
- –ö–æ–º–ø–∞—Å –Ω–µ –≤–∫–ª—é—á–µ–Ω (–Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ö–ü–ö)